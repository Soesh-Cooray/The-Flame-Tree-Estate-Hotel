<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Flame Tree Estate Hotel | Maintenance Team Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="Maintenance.css" />
</head>
<body>
  <div class="container">
    <header class="topbar">
      <div>
        <p class="eyebrow">Maintenance & Damaged Item Tracking</p>
        <h1>The Flame Tree Estate Hotel</h1>
        <p class="subtitle">Track issues, assign maintenance tasks, and monitor repair or replacement status.</p>
      </div>
      <a class="back-link" href="../User_Management/index.html">Back to Login</a>
    </header>

    <main class="layout">
      <section class="panel full-width">
        <h2>Repair / Replacement Status</h2>
        <div class="status-grid">
          <article class="status-card">
            <h3>Open Issues</h3>
            <p class="metric" id="openIssuesMetric">0</p>
            <p>Newly reported damaged assets awaiting action.</p>
          </article>
          <article class="status-card">
            <h3>In Progress</h3>
            <p class="metric" id="inProgressMetric">0</p>
            <p>Tasks currently assigned and under maintenance.</p>
          </article>
          <article class="status-card">
            <h3>Repaired</h3>
            <p class="metric" id="repairedMetric">0</p>
            <p>Resolved issues completed by maintenance team.</p>
          </article>
          <article class="status-card">
            <h3>Replacement Needed</h3>
            <p class="metric" id="replacementMetric">0</p>
            <p>Items marked for purchase and replacement workflow.</p>
          </article>
        </div>
      </section>

      <section class="panel full-width">
        <h2>Maintenance Activity Log</h2>
        <div class="table-actions">
          <button type="button" id="openAddDialogBtn">Add Maintenance Ticket</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ticket</th>
                <th>Location</th>
                <th>Issue</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="maintenanceTableBody"></tbody>
          </table>
        </div>
        <p id="maintenanceMessage" aria-live="polite"></p>
      </section>
    </main>
  </div>

  <dialog id="addTicketDialog" class="maintenance-dialog">
    <form class="form" id="addTicketForm" method="dialog">
      <h3>Add Maintenance Ticket</h3>

      <label for="ticketId">Ticket ID</label>
      <input id="ticketId" type="text" placeholder="e.g., MT-2026-014" required />

      <label for="location">Room / Location</label>
      <input id="location" type="text" placeholder="e.g., Room 104, Lobby" required />

      <label for="issue">Issue</label>
      <input id="issue" type="text" placeholder="e.g., AC not cooling" required />

      <label for="assignedTo">Assign To</label>
      <input id="assignedTo" type="text" placeholder="Technician name" required />

      <label for="status">Status</label>
      <select id="status" required>
        <option value="">Select status</option>
        <option>Open</option>
        <option>In Progress</option>
        <option>Repaired</option>
        <option>Replacement Needed</option>
      </select>

      <div class="dialog-actions">
        <button type="button" class="secondary-btn" id="cancelAddDialogBtn">Cancel</button>
        <button type="submit">Add Ticket</button>
      </div>
    </form>
  </dialog>

  <dialog id="updateTicketDialog" class="maintenance-dialog">
    <form class="form" id="updateTicketForm" method="dialog">
      <h3>Update Maintenance Ticket</h3>

      <input id="updateTicketIndex" type="hidden" />

      <label for="updateTicketId">Ticket ID</label>
      <input id="updateTicketId" type="text" required />

      <label for="updateLocation">Room / Location</label>
      <input id="updateLocation" type="text" required />

      <label for="updateIssue">Issue</label>
      <input id="updateIssue" type="text" required />

      <label for="updateAssignedTo">Assign To</label>
      <input id="updateAssignedTo" type="text" required />

      <label for="updateStatus">Status</label>
      <select id="updateStatus" required>
        <option>Open</option>
        <option>In Progress</option>
        <option>Repaired</option>
        <option>Replacement Needed</option>
      </select>

      <div class="dialog-actions">
        <button type="button" class="secondary-btn" id="cancelUpdateDialogBtn">Cancel</button>
        <button type="submit">Save Changes</button>
      </div>
    </form>
  </dialog>

  <script src="Maintenance.js"></script>
</body>
</html>
